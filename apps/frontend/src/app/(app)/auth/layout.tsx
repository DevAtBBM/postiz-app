import { getT } from '@gitroom/react/translation/get.translation.service.backend';

export const dynamic = 'force-dynamic';
import { ReactNode } from 'react';
import Image from 'next/image';
import clsx from 'clsx';
import loadDynamic from 'next/dynamic';
import { isGeneralServerSide } from '@gitroom/helpers/utils/is.general.server.side';
import { LoginLeftSection } from '@gitroom/frontend/components/auth/login.left.section';
const ReturnUrlComponent = loadDynamic(() => import('./return.url.component'));
export default async function AuthLayout({
  children,
}: {
  children: ReactNode;
}) {
  const t = await getT();

  return (
    <div className="dark !bg-black lbox">
      <ReturnUrlComponent />
      <div className="" />
      <div className="flex justify-center  items-center p-5 h-[100vh] w-[100vw] bg-loginBg bg-cover bg-no-repeat bg-center overflow-hidden">
        <div className="relative w-full lg:max-w-[1000px] sm:flex bg-[#0c0c0c] border-2 border-[rgb(255_255_255/48%)] rounded-[20px] overflow-y-auto overflow-x-hidden sm:overflow-visible max-h-[95vh] sm:max-h-[none]">
          <div className="flex justify-center items-center text-center sm:w-[50%] p-5 text-center bg-[#1a1919] rounded-bl-[20px] rounded-br-[20px] sm:rounded-br-[0px] sm:rounded-tl-[20px]">
            <div className="">
              <div className="w-full relative">
                <div className="text-textColor justify-center items-center w-full flex gap-[10px]">
                  <Image
                    src={isGeneralServerSide() ? '/postiz.svg' : '/logo.svg'}
                    width={100}
                    height={60}
                    alt="Logo"
                  />
                  <div
                    className={clsx(
                      !isGeneralServerSide() ? 'mt-[12px]' : 'min-w-[80px]'
                    )}
                  >
                    {isGeneralServerSide() ? (
                      <svg width="150" height="65" viewBox="0 0 366 167" fill="none" xmlns="http://www.w3.org/2000/svg">
                        
                        <path d="M51.12 68.998C51.12 85.012 40.614 93.172 26.13 93.172H18.072V115C15.42 115.51 12.156 115.612 9.912 115.612C7.974 115.612 4.404 115.51 1.752 115V45.844L2.466 45.13C11.238 44.926 18.378 44.722 26.13 44.722C40.614 44.722 51.12 52.474 51.12 68.998ZM18.072 57.166V80.932C20.928 80.83 23.682 80.728 24.804 80.728C32.862 80.728 34.494 73.894 34.494 68.998C34.494 64.204 32.862 57.268 24.804 57.268C22.662 57.268 20.826 57.268 18.072 57.166ZM101.858 89.5C101.858 98.476 99.9198 105.106 94.5138 110.512C90.2298 114.694 84.6198 116.53 78.2958 116.53C71.8698 116.53 66.2598 114.694 62.0778 110.512C56.6718 105.106 54.7338 98.476 54.7338 89.5C54.7338 80.626 56.6718 73.996 62.0778 68.59C66.2598 64.408 71.8698 62.572 78.2958 62.572C84.6198 62.572 90.2298 64.408 94.5138 68.59C99.9198 73.996 101.858 80.626 101.858 89.5ZM71.0538 89.5C71.0538 97.966 71.9718 104.596 78.2958 104.596C84.5178 104.596 85.4358 97.966 85.4358 89.5C85.4358 81.136 84.5178 74.506 78.2958 74.506C71.9718 74.506 71.0538 81.136 71.0538 89.5ZM107.005 111.532C107.107 108.064 109.045 103.168 111.391 100.72C115.879 103.066 121.489 105.004 125.569 105.004C129.445 105.004 131.485 103.474 131.485 101.434C131.485 99.496 130.159 97.966 126.793 96.844L121.183 94.702C114.043 92.05 108.433 87.664 108.433 79.402C108.433 69.1 116.185 62.572 128.221 62.572C134.341 62.572 142.501 64.612 146.989 66.856C147.193 70.63 145.153 76.036 142.603 77.974C138.319 76.036 133.219 74.098 128.323 74.098C125.569 74.098 124.141 75.526 124.141 77.362C124.141 79.096 125.263 80.218 128.017 81.238L134.341 83.482C142.093 86.236 147.907 91.234 147.907 99.904C147.907 110.104 139.747 116.53 127.303 116.53C119.347 116.53 111.697 114.184 107.005 111.532ZM186.092 64C186.5 65.938 186.704 67.774 186.704 69.508C186.704 71.548 186.5 73.486 186.092 75.322L173.954 75.118V98.578C173.954 101.638 175.28 103.372 178.442 103.372H184.154C184.97 105.616 185.48 108.472 185.48 110.92C185.48 112.144 185.378 113.47 185.072 114.49C181.298 115 175.892 115.51 171.914 115.51C162.632 115.51 158.348 111.022 158.348 101.332V75.22L150.392 75.322C149.881 73.486 149.677 71.548 149.677 69.508C149.677 67.774 149.881 65.938 150.392 64L158.348 64.204V58.288C158.348 51.25 160.796 48.7 167.018 48.7H173.24L173.954 49.414V64.204L186.092 64ZM238.418 81.34V102.25C238.418 106.228 239.03 109.798 240.865 112.348C238.52 114.388 234.95 115.816 230.972 115.816C224.546 115.816 222.404 112.348 222.404 105.922V84.196C222.404 79.606 221.486 77.464 218.018 77.464C215.978 77.464 213.122 78.484 210.47 80.932V115C208.226 115.408 205.268 115.612 202.514 115.612C199.862 115.612 196.802 115.408 194.558 115V64.102L195.272 63.388H201.29C205.574 63.388 208.328 65.632 209.654 69.508C213.632 65.938 218.222 63.184 224.138 63.184C233.42 63.184 238.418 70.732 238.418 81.34ZM249.625 49.516C249.625 47.578 250.033 45.436 250.849 43.6C252.583 42.682 255.643 41.968 258.397 41.968C261.151 41.968 264.415 42.682 265.945 43.6C266.761 45.436 267.169 47.68 267.169 49.516C267.169 51.352 266.761 53.596 265.945 55.432C264.415 56.248 261.151 56.962 258.397 56.962C255.643 56.962 252.379 56.35 250.849 55.432C250.033 53.596 249.625 51.352 249.625 49.516ZM268.699 75.832V115C266.455 115.408 263.395 115.612 260.641 115.612C257.989 115.612 255.031 115.408 252.685 115V81.238C252.685 77.872 251.461 75.322 247.891 75.322H246.361C245.851 73.588 245.749 71.854 245.749 69.916C245.749 68.182 245.851 66.04 246.361 64.204C249.523 63.898 253.093 63.694 255.337 63.694H257.581C264.313 63.694 268.699 68.386 268.699 75.832ZM283.078 115V75.22L274.306 75.322C273.898 73.588 273.694 71.344 273.694 69.508C273.694 67.774 273.898 65.734 274.306 64L282.262 64.102C281.956 61.858 281.752 59.614 281.752 57.268C281.752 47.17 288.892 39.52 299.5 39.52C305.926 39.52 311.638 41.05 315.208 42.376C315.31 45.946 313.78 50.74 311.74 52.882C309.7 52.27 306.64 51.454 303.886 51.454C299.5 51.454 297.052 53.8 297.052 58.492C297.052 60.226 297.154 62.164 297.46 64.204L310.822 64C311.23 65.734 311.434 67.774 311.434 69.508C311.434 71.344 311.23 73.588 310.822 75.322L298.582 75.118V115C296.236 115.408 293.38 115.612 290.728 115.612C288.178 115.612 285.526 115.408 283.078 115ZM364.329 65.734L351.783 113.674C348.111 127.546 342.603 137.338 326.691 137.338C322.611 137.338 317.103 136.216 314.349 135.298C313.941 131.626 315.369 126.322 317.511 123.874C319.653 124.588 323.325 125.404 326.691 125.404C331.791 125.404 335.157 122.344 336.687 117.142L337.095 115.714C331.587 115.714 327.813 114.082 326.487 109.288L314.655 65.326C317.817 63.898 321.795 63.184 324.447 63.184C328.323 63.184 330.873 64.714 332.199 70.018L336.891 89.602C337.809 93.07 338.727 99.7 339.237 103.066C339.339 103.678 339.543 103.78 340.053 103.78L348.927 64.204C350.661 63.694 353.211 63.49 355.251 63.49C357.903 63.49 360.861 63.694 363.717 64.612L364.329 65.734Z" fill="currentColor" />
                        
                        </svg>
                    ) : (
                      <div className="text-[40px]">{t('gitroom', 'Gitroom')}</div>
                    )}
                  </div>
                </div>
              </div>

              <LoginLeftSection />
            </div>
          </div>
          <div className="sm:w-[50%] flex flex-col items-center">
            <div className="p-[16px] sm:p-[32px] w-full text-textColor rbox sm:overflow-y-auto overflow-x-hidden sm:max-h-[90vh] xxl-max-h-[80vh]">
              {children}
            </div>
            
          </div>
        </div>
      </div>
    </div>
  );
}
